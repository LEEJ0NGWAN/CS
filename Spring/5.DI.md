[돌아가기](./README.md)
# 다양한 의존관계 주입 방법

- 생성자 주입
- 수정자 주입(setter)
- 필드 주입
- 일반 메서드 주입

# 생성자 주입

클래스 생성자를 통해서 의존관계를 주입하는 방법

```jsx
public class Something {

    private Other other;

    @Autowired
    public Something(Other other) {
        this.other = other;
    }
}
```

### 특징

- 생성자 호출 시 딱 1번만 호출이 되는 것이 보장됨
- 필수로 주입이 되어야 하고, 한번 주입된 후에 불변을 유지하는 의존관계에 사용됨
- 생성자가 하나일 경우, 등록된 빈에 한해서 `@Autowired` 없어도 자동 주입 가능

# 수정자 주입

setter를 통해서 의존관계를 주입하는 방법

```jsx
public class Something {

    private Other other;

    @Autowired
    public void setOther(Other other) {
        this.other = other;
    }
}
```

### 특징

- 선택적으로 주입되고, 변경 가능성이 있는 의존관계에 사용됨
- 관례적인 setter를 통한 주입

# 필드 주입

필드에 바로 의존관계를 주입하는 방법

```jsx
public class Something {

    @Autowired private Other other;

}
```

### 특징

- 간결하지만 외부 변경이 불가능해서 테스트가 어려운 단점이 있음

    → DI 기술이 없는 경우 사용 불가; 즉 순수 자바에서 사용 불가능함

    (권장되지 않는 주입 방법)

- 스프링과 관련된 `@Configuration`과 같은 곳에서 간단한 테스트 용도로만 사용하자

# 일반 메서드 주입

일반 메서드에 의존관계를 주입하는 방법

```jsx
public class Something {

    private Other other;

    @Autowired
    public void foo(Other other) {
        this.other = other;
    }
}
```

### 특징

- 한번에 여러 필드 주입 가능

# 주입 옵션 처리

주입할 빈이 없어도 동작해야하는 경우에 옵션을 줄 수 있다

`@Autowired` 의 `required` 옵션이 디폴트로 `true` 이기 때문에, 빈이 없으면 오류가 발생한다

`false` 로 바꿔준다면, 주입할 빈이 없어도 동작하도록 설정할 수 있다 

### @Autowired(required=false)

자동 주입할 빈이 없다면 메서드 자체가 호출되지 않음

# 생성자 주입이 권장되는 이유

### 불변성 보장

→ 관례적으로, 애플리케이션 주기 동안 의존관계가 변경되는 일이 없다;

오히려 애플리케이션 종료까지 안전성의 이유로 불변성이 요구됨

### 누락 사전 방지

→ 순수 자바 코드로 단위 테스트에 필요한 의존관계를 컴파일 단계에서 미리 확인할 수 있음

### final 사용 가능

→ 의존 관계로 주입받을 빈이 설정되지 않을 경우를 컴파일 단계에서 미리 확인할 수 있음

(생성자 주입 방법 외에는 전부 final을 사용할 수 없다)

⇒ 즉, 필수 의존관계는 생성자 주입을 사용하고, 가끔 있을 선택적 의존관계는 수정자 주입 방법을 이용

# 롬복

반복적인 작업을 애노테이션을 통해 자동으로 처리할 수 있도록 지원하는 라이브러리

### lombok의 대표적 기능

- Getter & Setter 자동 생성

    `@Getter` `@Setter` 애노테이션을 통해 필드들의 getter와 setter를 자동 생성

- 생성자 자동 생성

    `@NoArgsConstructor` 같은 생성자 애노테이션을 통해 생성자 자동 생성

- ToString 자동 생성

    `@ToString` 애노테이션을 통해 필드들의 ToString 자동 생성

- final 필드 생성자 주입 자동 생성

    `@RequiredArgsConstructor` 애노테이션을 통해 final 필드들의 자동 생성자 주입 생성
