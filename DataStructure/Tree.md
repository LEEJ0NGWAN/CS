[돌아가기](./README.md)
# 트리(Tree)

계층 관계를 표현하는 비선형 자료구조

→ 삽입과 제거에 국한된 것이 아니라, 데이터 관계 구조를 나타내는 것에 의미가 더 크다

# 트리의 구성요소

### 노드(node)

트리를 구성하는 원소

### 엣지(edge)

노드들을 연결하는 선

### 루트(root node)

트리의 노드들 중 가장 최상위에 존재하는 노드

### 단말 노드(leaf node; terminal node)

가장 말단에 위치한 노드; 해당 노드의 하위에는 어떤 노드도 존재하지 않는다

### 내부 노드(internal node)

단말 노드가 "아닌" 노드(루트 노드 포함)

# 부모와 자식

노드끼리 부모와 자식 관계가 성립할 수 있다

### 부모 노드

1개 이상의 노드들을 엣지를 통해 자신의 하위에 두고 있는 노드

### 자식 노드

어떤 노드의 하위 노드

### 차수(degree)

어떤 노드의 자식 수

→ 트리의 차수는 노드 각각의 degree 중 최대 값

# 층; 레벨(level)

트리는 저장된 데이터(노드)들의 계층 관계를 나타내기 위한 비선형 자료구조로 계층의 개념이 존재

→ 루트 노드는 (0 level)이고, 단말 노드로 갈수록 레벨이 증가한다

### 높이(height)

트리가 얼마나 깊은지(high) 측정하는 척도

→ 트리의 최고 레벨을 가리킨다

# 이진 트리(Binary Tree)

모든 노드들이 최대 2개의 자식 노드를 갖는 트리

### 포화 이진 트리(Perfect Binary Tree)

→ 모든 레벨에 노드가 꽉 찬 이진 트리

### 완전 이진 트리(Complete Binary Tree)

→ 위에서 아래로, 왼쪽에서 오른쪽으로 순서대로 자식노드가 채워진 이진 트리

### 정 이진 트리(Full Binary Tree)

→ 모든 노드가 0개 혹은 2개의 자식노드를 가지는 이진 트리

# 이진 탐색 트리(Binary Search Tree)

효율적인 데이터 탐색을 위해 사용되는 이진 트리의 일종

### BST 규칙

- 노드에 저장되는 값은 유니크 값이다
- 부모 노드의 값은 왼쪽 자식 노드보다 크다
- 부모 노드의 값은 오른쪽 자식 노드보다 작다
- 자식 노드들의 서브 트리도 이진 탐색 트리다

### 탐색 시간 복잡도

O(log n)

### 이진 탐색 트리가 편향될 경우

골고루 분산된 트리 모양이 되지 않고, 한쪽 자식 노드쪽으로 서브 트리가 계속 편향될 경우

→ 최악의 경우로 탐색 시간 복잡도가 O(n)이 된다

### Reblancing

편향 트리가 되는 것을 방지하고, 균형을 유지하기 위한 트리의 재조정

# 이진 힙(Binary Heap)

완전 이진 트리의 일종

### Heap?

모든 부모 노드의 값이 자식 노드의 값보다 항상 크거나 작은 것을 의미

- Max Heap

    모든 부모 노드의 값이 항상 크다 → 루트 값은 해당 트리의 최댓값

- Min Heap

    모든 부모 노드의 값이 항상 작다 → 루트 값은 해당 트리의 최솟값

### 힙에서 최대, 최소 값을 찾는데 걸리는 시간 복잡도

O(1)

→ 루트 노드의 값이 해당 트리에서 항상 최댓값 또는 최솟값이기 때문

### Heapify

힙 트리에서 최솟값 또는 최댓값을 찾아 제거하면, 그 다음 탐색을 위해 항상 힙트리를 다시 재구성 해야함

→ 제거된 루트 노드 자리에 맨 마지막 단말 노드가 채워지고, 다시 힙트리 구성을 위한 정렬이 시작됨

 이 과정에서, 새로운 최대값 또는 최소값을 다시 찾기까지 약 O(log n)의 시간이 소요됨

# 레드 블랙 트리(Red Black Tree)

BST를 기반으로 하는 Self-balancing 트리 자료구조

어떤 노드들에 대해 편향된 서브 트리를 구성하지 않고 높이를 최대한 낮춰 시간 복잡도를 줄이는 취지

→ 높이가 최소인 트리는 완전 이진 트리

### 시간 복잡도

탐색, 삽입, 삭제 연산 모두 O(log n)

### RBT 규칙

- 각 노드는 `Red` 또는 `Black` 색깔을 가진다
- 루트 노드는 `Black` 이다
- 모든 리프 노드(NIL)는 `Black` 이다

    **NIL?**

    → RBT에서 쓰이는 더미 노드로, 기존 트리에 있던 단말 노드의 자식 노드로 붙게 된다

    즉, RBT는 모든 단말 노드가 NIL 노드이다

- `Red` 노드의 자식 노드는 모두 `Black` 이다
- 각각의 노드에서 해당 노드와 이어진 단말 노드(NIL)에 이르는 단순 경로는 모두 `Black` 노드 개수가 같다

    **Black-Height**

    → 각 노드에서 내려갈 수 있는 단말 노드(NIL)에 이르는 단순 경로 상 `Black` 개수

### 특징

- BST의 특징을 갖는다
- 루트부터 단말 노드(NIL)까지의 모든 경로 중에서, 최소 경로와 최대 경로의 크기 비율은 2보다 같거나 작다

    → `Balanced` (편향되지 않는다)

- 모든 단말 노드는 NIL로 구성된다 → 즉, RBT 적용하기 전의 단말 노드의 자식으로 NIL 노드들 추가

### 삽입 연산

1. BST의 특성을 유지하며 노드 삽입하는데, 이때 삽입 되는 노드는 `Red` 로 설정 (Black-Height 최소화)
2.  
    1. 삽입되는 노드가 RBT 규칙을 위배한 경우

        → 삽입되는 노드 색깔을 `Black` 로 변경

    2. 삽입되는 노드가 Black-Height를 위배한 경우

        → rotation 과정을 통해 height 조정 (reblancing)

    ⇒ RBT의 동일 레벨에 위치하는 내부 노드(internal node)의 Black-Height가 동일하게 유지됨
    (NIL까지의 최대 경로와 최소 경로의 크기 비율이 2 미만으로 유지됨)

### 삭제 연산

1. BST의 특성을 유지하며 노드 삭제하는데, 삭제될 노드의 자식 노드 수에 따라 rotation이 달라짐
2.  
    1. 삭제되는 노드가 `Black` 일 경우

        → Black-Height가 감소한 경로에 `Black` 이 추가되도록 rotation 및 색 조정

    2. 삭제되는 노드가 `Red` 일 경우

        → RBT 위배가 없으므로 그대로 진행

### 자바에서 RBT 사용 사례

Java Collection Framework에서 사용됨

- ArrayList의 내부 구조로 사용
- HashMap의 `Separate Chaining` 에 사용
