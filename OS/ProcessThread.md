[돌아가기](./README.md)

# 프로세스 (Process)

현재 메모리에 적재되어 실행 중인 프로그램

운영체제로부터 주소 공간, 파일, 메모리 등을 할당 받음

# 프로세스 구성 요소

### 프로세스 스택

함수의 매개변수, 복귀 주소, 로컬 변수 같은 임시 자료를 저장

### 데이터 섹션

전역 변수 저장

### 힙 메모리

프로세스 수행 중 동적으로 할당되는 메모리 영역

# 프로세스 제어 블록 (PCB; Process Control Block)

각 프로세스의 Context 등 프로세스의 중요한 정보를 저장하는 자료구조

→ OS는 프로세스의 효율적 관리를 위해 프로세스 당 하나의 고유 PCB를 생성

Context Switching 이 일어나는 시점에서 기존에 작업 중이던 진행 상황을 PCB에 저장

→ 다시 CPU를 할당 받으면 PCB에 저장되어 있던 내용을 불러와 종료 시점부터 다시 작업 재개

### Context Switching (문맥 교환)

인터럽트 요청에 의해, 기존에 CPU를 할당받아 작업을 수행 중이던 프로세스의 상태와 정보를 보관하고 다음 우선 순위의 프로세스 상태와 정보값으로 교체하는 것

### PCB 적재 정보

- 프로세스 식별자 (PID) → 프로세스 식별 번호
- 프로세스 상태 → `new`, `ready`, `running`, `waiting`, `terminated` 등의 상태 정보
- 프로그램 카운터 (pc) → 프로세스가 현시점에서 실행할 명령어의 주소를 가리키는 정보
- CPU 레지스터
- CPU 스케쥴링 정보 → 프로세스 우선순위, 스케쥴 큐에 대한 포인터
- 메모리 관리 정보 → 페이지 테이블 또는 세그먼트 테이블 같은 정보
- 입출력 상태 정보 → 프로세스에 할당된 입출력 장치, 열린 파일 목록
- 어카운팅 정보 → 사용 CPU 시간, 시간 제한, 계정 번호 등

# 쓰레드 (Thread)

프로세스 내부에서 실행되는 실행 단위

→ 프로세스 내부에서 동작하는 여러 실행의 흐름을 나타내는 단위로, 프로세스 내부의 주소공간과 자원을 공유

### 쓰레드 구성 정보

- 쓰레드 ID
- 프로그램 카운터
- 레지스터 집합
- 스택

### 쓰레드끼리 공유하는 정보

- 코드
- 데이터 섹션
- OS 자원 (열린 파일, 신호 등...)

## 각 쓰레드마다 스택 할당 이유

독립적인 실행 흐름 제어를 제공하기 위한 최소 조건을 만족시키기 위해 각 쓰레드에 스택 독립적 할당

스택은 함수 파라매터, 돌아갈 주소 값, 지역 변수를 저장하는 메모리 공간

→ 스택 메모리를 독립적으로 가져야 독자적인 함수 호출과 실행 흐름 제어가 가능

## 각 쓰레드마다 PC Register 할당 이유

쓰레드도 프로세스처럼 CPU 할당 및 선점이 일어나는데, 

교체가 일어나는 시점에서 수행하던 작업의 위치를 기억하기 위해 각 쓰레드에 PC Register 독립적 할당
