[돌아가기](./README.md)

# 스케줄링

멀티 프로그래밍을 가능하게 하는 운영체제의 동작 기법으로,

다음에 동작할 프로세스 선발하고 시스템 자원을 할당하는 작업

## 스케줄링 큐

프로세스 스케줄링에 필요한 큐

- Job Queue

    현재 시스템에 존재하는 모든 프로세스 집합

- Ready Queue

    현재 메모리에 존재하는 CPU 할당 대기 프로세스 집합

- Device Queue

    디바이스 I/O 작업 대기 프로세스 집합

# 스케줄러

프로세스 스케줄링을 수행하는 운영체제 커널의 모듈

3가지 종류의 스케줄러가 존재

## 장기 스케줄러 (작업 스케줄러)

어떤 프로세스를 Ready Queue에 삽입하는 작업 수행

**프로세스?**

프로세스는 디스크에서 애플리케이션을 가져와 커널에 등록하는 것을 통해 프로세스로 생성됨

- 장기 스케줄러는 프로세스 생성을 위해 디스크에서 커널에 등록할 프로그램을 선별하는 작업
- 장기 스케줄러는 수십 초 또는 수분 단위로 가끔 호출되기 때문에, 상대적으로 속도가 느린 것을 허용
- 장기 스케줄러는 메모리에 동시에 올라가는  프로세스의 수를 조절하는 역할 수행

### 현대 시분할 시스템

일반적으로 현대 시분할 시스템에서 장기 스케줄러를 사용하지 않음

→ 예전에는 할당할 메모리가 적었기 때문에, 장기 스케줄러가 프로세스 수를 조절하는 역할을 수행

그러나, 현대 운영체제는 프로세스 시작 시 장기 스케줄러 없이 바로 메모리를 할당해서 Ready Queue에 넣어줌

## 단기 스케줄러 (CPU 스케줄러)

어떤 준비 상태의 프로세스 중 한 프로세스를 다음 CPU 타임에 실행 상태로 만드는 작업 수행

시분할 시스템에서, 타이머 인터럽트 발생 시 단기 스케줄러 호출

- 일반적으로 스케줄러(프로세스에 자원 할당하는 모듈)는 단기 스케줄러를 의미
- 단기 스케줄러는 스케줄링 알고리즘에 따라 CPU 할당 프로세스를 선발
- 단기 스케줄러는 ms 이하의 시간 단위로 매우 빈번하게 호출되기 때문에, 수행 속도가 충분히 빨라야 함

## 중기 스케줄러

많은 프로세스에게 메모리 할당으로 시스템 성능 저하가 우려되는 경우,

메모리에 적재된 프로세스의 수를 동적으로 조절하는 작업 수행

### 많은 프로세스 탑재 시 발생 문제

디스크 I/O가 자주 발생해서 시스템의 성능을 심각하게 저하시킴

→ 많은 프로세스 탑재로 프로세스 당 보유 메모리가 적어지므로 CPU 수행에 당장 필요한 프로세스의 주소 탑재조차 어려워지기 때문에 매번 디스크 I/O를 초래함

### swap out

메모리에 적재된 프로세스의 수를 조정하는 방법

→ 메모리에 탑재된 프로세스 중 일부를 선택해서 메모리를 전부 빼앗아 그 내용을 디스크 스왑 영역에 저장

**swap in**

디스크 스왑 영역에서 메모리로 프로세스를 적재

**swapping**

디스크와 메모리 영역 사이로 프로세스를 이동시키는 작업으로 `swap in`, `swap out`을 통틀어 지칭하는 것

### swap out 전략

1. block 상태 프로세스 스왑 아웃

    → block 상태 프로세스는 지금 당장 CPU를 획득할 가능성이 없기 때문

2. 타이머 인터럽트가 발생해 Ready Queue로 이동하는 프로세스들 추가 스왑 아웃

    → block(다른 작업 완료 및 cpu 재할당 대기) 상태 프로세스 스왑 아웃으로 문제가 해결되지 않을 경우 수행

### 프로세스의 중지(suspended, stopped) 상태

중기 스케줄러의 등장으로 새로 추가된 상태로, 중지 상태의 프로세스는 메모리를 전부 뺏기고 디스크로 스왑 아웃

- 중지 준비(ready suspended) → ready 상태의 프로세스 swap out
- 봉쇄 중지(block suspended) → block 상태의 프로세스 swap out
