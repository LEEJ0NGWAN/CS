[돌아가기](./README.md)

# 동기화 기법

여러 프로세스 또는 쓰레드가 공유 자원에 접근하는 것을 제어하기 위한 기법

### 임계영역

둘 이상의 쓰레드가 동시에 접근하면 안되는 공유 자원에 접근하는 코드 세그먼트

# 세마포어 (Semaphore)

동기화 기법 중 하나로, 공유 자원을 여러 프로세스가 동시에 접근하는 것을 막는 기법

여러 프로세스들에 의해 공유되는 변수로 정의

### P 연산

공유 자원 S에 대해, 요청 프로세스에 S를 할당해주는 연산

```jsx
procedure P(S)

	while S=0 do wait

	S := S-1

end P
```

→ S가 0이 아닐 때 자원을 할당 해주고, S가 0이라면 할당해줄 S가 1이상이 생길 때까지 대기

### V 연산

공유 자원 S에 대해, 프로세스의 할당된 S를 해제해주는 연산

```jsx
procedure V(S)

	S := S+1

end V
```

⇒ P, V를 수행하는 동안 프로세스는 인터럽트를 당하지 않는다

P, V 연산을 통해 위험지역(critical section)에 대한 상호 배제를 구현할 수 있음

# 뮤텍스 (Mutex)

동기화 기법 중 하나로, 공유 자원에 두 쓰레드가 동시에 접근하는 것을 막는 기법

상호 배제라고 불리며, 임계영역을 다루는 쓰레드의 실행 시간이 서로 겹치지 않도록 각각 단독으로 실행되게 함

- 임계영역에 진입할 때, lock을 걸어(소유하며) 다른 쓰레드의 접근 방지
- 임계영역에서 벗어날 때, lock을 해제하여(반납하며) 다른 쓰레드의 접근 허용

# 세마포어 vs 뮤텍스

### 범용성

- 세마포어는 뮤텍스 대체 가능 → binary semaphore = mutex
- 뮤텍스는 세마포어 대체 불가능

### 소유

- 세마포어는 소유할 수 없음
- 뮤텍스는 현재 자원을 사용하는 쓰레드 차원에서 뮤텍스(lock)를 소유

### 선취

- 세마포어는 모든 프로세스(쓰레드)가 세마포어의 해제 가능
- 뮤텍스는 현재 뮤텍스를 소유한 쓰레드만 뮤텍스 해제 가능

### 범위

- 세마포어는 시스템 차원에 존재하며, 파일 시스템의 파일 형태로 존재 (프로세스 간의 통신 위해)
- 뮤텍스는 프로세스 차원에 존재하며, 프로세스가 종료 될 때 자동으로 clean up

### 동기화 대상

- 세마포어는 동기화 대상이 한개 이상(같은 종류의 여러 자원)일 때 사용
- 뮤텍스는 오직 하나일 때 사용일 때 사용
